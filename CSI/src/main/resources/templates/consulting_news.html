<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Consulter News</title>
    <link th:href="@{/bootstrap/css/bootstrap.min.css}" rel="stylesheet" media="screen"/>
    <link th:href="@{/bootstrap/js/bootstrap.min.js}" rel="script" media="screen"/>
</head>
<body>
<h1 class="text-center">Menu des news</h1>
<div class="col-6" th:if="${type} == 'internaute'">
    <div id="contentLast3" style="display: none" th:text="${last3_json}"></div>
    <label for="selectCat">Choissisez une catégorie</label>
    <select class="form-select" id="selectCat">
        <option value="none">Aucune sélection</option>
        <th:block th:each="entry, stat : ${last3}">
            <option th:value="${entry.key}" th:text="${entry.key}"></option>
        </th:block>
    </select>
    <div class="d-none deck_news_cat" th:each="entry, stat : ${last3}" th:id="|deck_${entry.key}|">
        <h1 class="text-center" th:text="| Catégorie : ${entry.key}|"></h1>
        <div class="card-deck">
            <th:block th:each="news : ${entry.value}">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title" th:text="${news.new_id}"></h5>
                        <p class="card-text" th:text="${news.new_texte}"></p>
                    </div>
                </div>
            </th:block>
        </div>
    </div>
    <script type="application/javascript">
        var select = document.querySelector("#selectCat");
        select.addEventListener("change", function () {
            list = document.querySelectorAll(".deck_news_cat");
            for (var i = 0; i < list.length; ++i) {
                list[i].classList.remove('d-block');
                list[i].classList.add('d-none');
            }
            if (select.value !== "none") {
                document.querySelector("#deck_" + select.value).classList.remove("d-none");
                document.querySelector("#deck_" + select.value).classList.add("d-block");
            }
        })
    </script>
</div>
</body>
</html>